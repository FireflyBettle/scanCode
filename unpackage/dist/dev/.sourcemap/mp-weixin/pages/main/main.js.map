{"version":3,"sources":["uni-app:///main.js",null,"webpack:////Users/chenyourong/Documents/person/system/小程序/scanCode/pages/main/main.vue?4c6d","webpack:////Users/chenyourong/Documents/person/system/小程序/scanCode/pages/main/main.vue?9c8b","webpack:////Users/chenyourong/Documents/person/system/小程序/scanCode/pages/main/main.vue?bc38","uni-app:///pages/main/main.vue","webpack:////Users/chenyourong/Documents/person/system/小程序/scanCode/pages/main/main.vue?47f8","webpack:////Users/chenyourong/Documents/person/system/小程序/scanCode/pages/main/main.vue?6657"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page"],"mappings":";;;;;;;;;;kDAAA;;;AAGA;AACA,yF,8FAHA;AACAA,EAAE,CAACC,iCAAH,GAAuCC,mBAAvC,CAGAC,UAAU,CAACC,aAAD,CAAV,C;;;;;;;;;;;;;ACLA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA6H;AAC7H;AACwD;AACL;AACsC;;;AAGzF;AACsN;AACtN,gBAAgB,iNAAU;AAC1B,EAAE,0EAAM;AACR,EAAE,2FAAM;AACR,EAAE,oGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,+FAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA,WAAW,mBAAO,CAAC,uCAA+B;;AAElD,WAAW,mBAAO,CAAC,mCAA2B;;AAE9C,WAAW,mBAAO,CAAC,gCAAwB;;AAE3C;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACxBA;AAAA;AAAA;AAAA;AAAg2B,CAAgB,kyBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACwDp3B,mF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eACA,EACA,IADA,kBACA,CACA,SACA,cADA,EAEA,QAFA,EAGA,cAHA,EAIA,cAJA,EAKA,iBALA,CAKA;AALA,MAOA,CATA,EAUA,OAVA,qBAUA,CACA;AACA;AACA;AACA;AACA;AACA,uBACA,CAjBA,EAkBA,OAlBA,qBAkBA,CACA,wBACA,CApBA,EAqBA,WACA,gBADA,8BACA,6BACA,uBADA,CACA,YADA,yBACA,YADA,CACA,eADA,yBACA,eADA,CAEA,kFAFA,CAEA;AACA,KAJA,EAKA,WALA,yBAKA,kBACA,+CACA,IADA,GACA,GADA,CACA,IADA,CAEA,uBACA,yCACA,CAJA,EAKA,QACA,IADA,CACA,EACA,UADA,EAEA,YAFA,EADA,EAKA,IALA,CAKA,oBACA,IADA,GACA,GADA,CACA,IADA,CAEA,eACA,QADA,EAEA,QAFA,EAGA,OAHA,GAKA,kCACA,+CACA,mCACA,CAHA,EAIA,6BACA,CAjBA,EAkBA,CA7BA,EA8BA,YA9BA,0BA8BA,CACA,iBACA,yBADA,IAGA,CAlCA,EAmCA,QAnCA,sBAmCA,CACA,+BACA,eACA,yBADA,IAGA,CAxCA;AAyCA,kBAzCA,0BAyCA,UAzCA,EAyCA;AACA;AACA,kEADA;;AAGA,KA7CA;AA8CA,kBA9CA,4BA8CA;AACA;AACA,6BADA,EACA;AACA,uCAFA,EAEA;AACA;AACA,yCADA,CACA;AACA;AACA;AACA,2EADA;;AAGA;AACA,SAVA;AAWA;AACA;AACA;AACA,6BADA;AAEA,wBAFA;;AAIA,SAjBA;;AAmBA,KAlEA,EArBA,E;;;;;;;;;;;;;ACzDA;AAAA;AAAA;AAAA;AAA+mD,CAAgB,y7CAAG,EAAC,C;;;;;;;;;;;ACAnoD;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/main/main.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/main/main.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./main.vue?vue&type=template&id=52f690a6&scoped=true&\"\nvar renderjs\nimport script from \"./main.vue?vue&type=script&lang=js&\"\nexport * from \"./main.vue?vue&type=script&lang=js&\"\nimport style0 from \"./main.vue?vue&type=style&index=0&id=52f690a6&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"52f690a6\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/main/main.vue\"\nexport default component.exports","export * from \"-!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./main.vue?vue&type=template&id=52f690a6&scoped=true&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var m0 = require(\"../../static/startContent.png\")\n\n  var m1 = require(\"../../static/entering.png\")\n\n  var m2 = require(\"../../static/scane.png\")\n\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        m0: m0,\n        m1: m1,\n        m2: m2\n      }\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./main.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./main.vue?vue&type=script&lang=js&\"","<!--\n * @Author: chenyourong\n * @Date: 2025-05-28 15:38:41\n * @LastEditors: chenyourong\n * @LastEditTime: 2025-05-30 17:58:49\n * @Description: \n * @FilePath: /scanCode/pages/main/main.vue\n-->\n<template>\n  <div class=\"home\">\n    <custom-navbar title=\"企福通\" :showLogo=\"true\" :showBack=\"false\" />\n    <scroll-view scroll-y class=\"scroll-view\" :style=\"{ height: scrollHeight }\">\n      <div class=\"container\">\n        <div class=\"home-header\">\n          <div class=\"title\">{{ name }}</div>\n          <div class=\"loginOut\" @click=\"loginOut\">\n            <img src=\"../../static/startContent.png\" alt=\"\" />\n            <div>登出</div>\n          </div>\n        </div>\n        <div class=\"home-amount\">\n          <div>\n            <span>¥</span>\n            {{ currAmount }}\n          </div>\n          <div class=\"des\">今天核销金额</div>\n        </div>\n        <div class=\"home-picture\">\n          <img @click=\"jumpEntering\" src=\"../../static/entering.png\" alt=\"\" />\n          <img @click=\"scanCouponCode\" src=\"../../static/scane.png\" alt=\"\" />\n        </div>\n        <div class=\"home-record\">\n          <div class=\"title\">核销记录</div>\n          <ul class=\"content\">\n            <li\n              v-for=\"(item, index) in recordList\"\n              :key=\"index\"\n              @click=\"jumpStatusPage(item.couponCode)\"\n            >\n              <div class=\"content-left\">\n                <div class=\"name\">{{ item.couponName }}</div>\n                <div class=\"time\">{{ item.statusTime }}</div>\n              </div>\n              <div class=\"content-right\">\n                <div class=\"amount\"><span>¥</span>{{ item.amount }}</div>\n                <div class=\"status\">{{ item.statusDes }}</div>\n              </div>\n            </li>\n          </ul>\n        </div>\n      </div>\n    </scroll-view>\n  </div>\n</template>\n\n<script>\nimport * as request from \"@/api/api.js\";\nexport default {\n  data() {\n    return {\n      couponCode: \"\",\n      name: \"\",\n      currAmount: \"\",\n      recordList: [],\n      scrollHeight: 500, // 根据窗口动态计算更佳\n    };\n  },\n  created() {\n    // if (!uni.getStorageSync(\"token\")) {\n    //   uni.reLaunch({\n    //     url: \"/pages/index/index\",\n    //   });\n    // }\n    this.getInitData();\n  },\n  mounted() {\n    this.calcScrollHeight();\n  },\n  methods: {\n    calcScrollHeight() {\n      const { windowHeight, statusBarHeight } = uni.getSystemInfoSync();\n      this.scrollHeight = `calc(${windowHeight - statusBarHeight}px - 88rpx)`; // 减去导航栏高度\n    },\n    getInitData() {\n      request.storeDetail().then((res) => {\n        const { data } = res;\n        this.name = data.name;\n        this.currAmount = data.currAmount / 100;\n      });\n      request\n        .list({\n          pageNum: 0,\n          pageSize: 10,\n        })\n        .then((res) => {\n          const { data } = res;\n          const status = {\n            0: \"待核销\",\n            1: \"已核销\",\n            2: \"冲正\",\n          };\n          data.list.forEach((val) => {\n            val.amount = val.amount ? val.amount / 100 : 0;\n            val.statusDes = status[val.status];\n          });\n          this.recordList = data.list;\n        });\n    },\n    jumpEntering() {\n      uni.navigateTo({\n        url: \"/pages/enter/enter\",\n      });\n    },\n    loginOut() {\n      uni.removeStorageSync(\"token\");\n      uni.reLaunch({\n        url: \"/pages/index/index\",\n      });\n    },\n    jumpStatusPage(couponCode) {\n      uni.navigateTo({\n        url: `/pages/status/status?couponCode=${couponCode}`,\n      });\n    },\n    scanCouponCode() {\n      uni.scanCode({\n        onlyFromCamera: false, // 是否只能从相机扫码，false 表示也可以从相册选取二维码\n        scanType: [\"barCode\", \"qrCode\"], // 扫码类型，支持条形码和二维码\n        success: (res) => {\n          this.couponCode = res.result; // 将扫码结果赋值给 couponCode\n          console.log(\" 扫描成功，券码为: \", this.couponCode);\n          uni.navigateTo({\n            url: `/pages/enter/enter?couponCode=${this.couponCode}`,\n          });\n          // 这里可以添加后续处理逻辑，比如验证券码的有效性等\n        },\n        fail: (err) => {\n          console.error(\" 扫码失败: \", err);\n          uni.showToast({\n            title: \"扫码失败，请重试\",\n            icon: \"none\",\n          });\n        },\n      });\n    },\n  },\n};\n</script>\n\n<style lang='scss' scoped>\n.home {\n  .scroll-view {\n    .container {\n      position: relative;\n      min-height: 800rpx;\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      flex-direction: column;\n      border-top-left-radius: 24rpx;\n      border-top-right-radius: 24rpx;\n      background: #fff;\n      padding: 32rpx 48rpx;\n    }\n  }\n  &-header {\n    display: flex;\n    justify-content: space-between;\n    width: 100%;\n    .title {\n      font-family: PingFang SC;\n      font-size: 40rpx;\n      font-weight: 600;\n    }\n    .loginOut {\n      width: 160rpx;\n      height: 64rpx;\n      background: #e6f7ff;\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      font-size: 28rpx;\n      border-radius: 24rpx;\n      img {\n        width: 40rpx;\n        height: 40rpx;\n      }\n    }\n  }\n  &-amount {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    flex-direction: column;\n    margin: 80rpx 0;\n    font-size: 64rpx;\n    font-weight: 600;\n    span {\n      position: relative;\n      bottom: 4rpx;\n      font-size: 32rpx;\n      margin-right: 4rpx;\n      font-weight: normal;\n    }\n    .des {\n      font-size: 32rpx;\n    }\n  }\n  &-picture {\n    display: flex;\n    justify-content: space-between;\n    img {\n      width: 314rpx;\n      height: 232rpx;\n    }\n    img:nth-child(1) {\n      margin-right: 24rpx;\n    }\n  }\n  &-record {\n    width: 100%;\n    margin-top: 80rpx;\n    .title {\n      font-family: PingFang SC;\n      font-weight: 600;\n      font-size: 36rpx;\n      margin-bottom: 40rpx;\n    }\n    .content {\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      flex-direction: column;\n      li {\n        display: flex;\n        justify-content: space-between;\n        margin-bottom: 40rpx;\n        width: 100%;\n        .content-left {\n          display: flex;\n          justify-content: center;\n          flex-direction: column;\n          .name {\n            font-size: 32rpx;\n            margin-bottom: 8rpx;\n          }\n          .time {\n            font-size: 28rpx;\n            color: rgba(0, 0, 0, 0.45);\n          }\n        }\n        .content-right {\n          .amount {\n            font-family: PingFang SC;\n            font-weight: 600;\n            font-size: 32rpx;\n            margin-bottom: 8rpx;\n            text-align: right;\n            span {\n              text-align: right;\n            }\n          }\n          .status {\n            font-size: 28rpx;\n            color: rgba(0, 0, 0, 0.45);\n          }\n        }\n      }\n    }\n  }\n}\n</style>","import mod from \"-!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./main.vue?vue&type=style&index=0&id=52f690a6&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./main.vue?vue&type=style&index=0&id=52f690a6&lang=scss&scoped=true&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1748599129867\n      var cssReload = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}